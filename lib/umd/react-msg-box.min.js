!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("prop-types"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-dom"],n):n(e.ReactMsgBox={},e.React,e.PropTypes,e.ReactDOM)}(this,function(e,r,n,c){"use strict";var l="default"in r?r.default:r;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(){return(m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function s(i){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){var n,t,o;n=i,o=r[t=e],t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o})}return i}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,n){return(u=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function b(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}n=n&&n.hasOwnProperty("default")?n.default:n,c=c&&c.hasOwnProperty("default")?c.default:c;var o={show:!1,children:null,className:"",type:"alert",title:"提示",message:"主人未填写任何提示信息",timeout:0,opacity:"black",lockScroll:!0,backgroundFn:!1,formatFn:function(){},showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"确定",cancelButtonText:"取消"},d={black:"0.4",transparent:"0.0001"};!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".m-messagebox-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n}\n.m-confirm,\n.m-alert {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%);\n       -o-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  background-color: #fff;\n  width: 85%;\n  border-radius: 0.8vw;\n  font-size: 2.133vw;\n  -webkit-user-select: none;\n  overflow: hidden;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-transition: 0.2s;\n  -o-transition: 0.2s;\n  transition: 0.2s;\n}\n.m-confirm .m-msgbox-header,\n.m-alert .m-msgbox-header {\n  padding: 4vw 0 0;\n}\n.m-confirm .m-msgbox-title,\n.m-alert .m-msgbox-title {\n  color: #191F25;\n  text-align: center;\n  padding-left: 0;\n  margin-bottom: 0;\n  font-size: 4.533vw;\n  font-weight: 700;\n}\n.m-confirm .m-msgbox-content,\n.m-alert .m-msgbox-content {\n  padding: 2.667vw 5.333vw 4vw;\n  min-height: 9.6vw;\n  position: relative;\n}\n.m-confirm .m-msgbox-message,\n.m-alert .m-msgbox-message {\n  color: #A3A4A6;\n  margin: 0;\n  font-size: 3.733vw;\n  text-align: center;\n  line-height: 4.8vw;\n  word-break: break-all;\n}\n.m-confirm .m-msgbox-btn,\n.m-alert .m-msgbox-btn {\n  width: 100%;\n  position: relative;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 12.533vw;\n}\n.m-confirm .m-msgbox-btn::before,\n.m-alert .m-msgbox-btn::before {\n  content: \" \";\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  border-top: 1px solid #DCDEE3;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #DCDEE3;\n  -webkit-transform-origin: 0 0;\n      -ms-transform-origin: 0 0;\n       -o-transform-origin: 0 0;\n          transform-origin: 0 0;\n  -webkit-transform: scaleY(0.5);\n      -ms-transform: scaleY(0.5);\n       -o-transform: scaleY(0.5);\n          transform: scaleY(0.5);\n}\n.m-confirm .m-confirm-btn,\n.m-alert .m-confirm-btn,\n.m-confirm .m-cancel-btn,\n.m-alert .m-cancel-btn {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  text-align: center;\n  font-size: 4.533vw;\n}\n.m-confirm .m-cancel-btn,\n.m-alert .m-cancel-btn {\n  color: #3296FA;\n  position: relative;\n}\n.m-confirm .m-cancel-btn::after,\n.m-alert .m-cancel-btn::after {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  width: 1px;\n  height: 6.4vw;\n  content: '';\n  display: inline-block;\n  background: #DCDEE3;\n  -webkit-transform: translateY(-50%) scaleX(0.5);\n      -ms-transform: translateY(-50%) scaleX(0.5);\n       -o-transform: translateY(-50%) scaleX(0.5);\n          transform: translateY(-50%) scaleX(0.5);\n}\n.m-confirm .m-confirm-btn,\n.m-alert .m-confirm-btn {\n  color: #3296FA;\n}\n.m-confirm .m-confirm-btn.disable,\n.m-alert .m-confirm-btn.disable {\n  opacity: 0.5;\n}\n.m-toast {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%);\n       -o-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  background-color: rgba(0, 0, 0, 0.6);\n  min-width: 32vw;\n  border-radius: 2.667vw;\n  font-size: 2.133vw;\n  -webkit-user-select: none;\n  overflow: hidden;\n  -webkit-backface-visibility: hidden;\n          backface-visibility: hidden;\n  -webkit-transition: 0.2s;\n  -o-transition: 0.2s;\n  transition: 0.2s;\n  padding: 4.8vw 1.333vw;\n  text-align: center;\n  color: #fff;\n}\n.m-toast .gou {\n  color: #fff;\n  font-size: 13.333vw;\n}\n.m-toast .m-content {\n  font-size: 4vw;\n  word-break: break-all;\n}\n");var h=void 0,p=function(e){function t(e){var n;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,f(t).call(this,e))).timer=null,n.state=s({},n.props),n}var n,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&u(e,n)}(t,r.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.changeLockScroll(),this.timeOutFn()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.timer)}},{key:"componentWillReceiveProps",value:function(e){this.setState(s({},e))}},{key:"changeLockScroll",value:function(){this.state.lockScroll&&("hidden"!==document.body.style.overflow?document.body.style.overflow="hidden":document.body.style.overflow="")}},{key:"timeOutFn",value:function(){var e=this,n=this.state.timeout;n&&(this.timer=setTimeout(function(){e.handleAction("confirm")},n))}},{key:"handleAction",value:function(e,n){var t=this,o=this.state.callback;this.close(function(){t.changeLockScroll(),"function"==typeof o&&o(e,n)})}},{key:"update",value:function(e){var n=this;this.open(),this.setState(s({},e),function(){n.changeLockScroll(),n.timeOutFn()})}},{key:"open",value:function(e){this.setState({show:!0},function(){"function"==typeof e&&e()})}},{key:"close",value:function(e){this.setState({show:!1},function(){"function"==typeof e&&e()})}},{key:"backgroundFunc",value:function(e){var n=this.state.backgroundFn;if(e.target===e.currentTarget&&n){if(!0===n)return void this.handleAction("cancel");!0===("function"==typeof n&&n())&&this.handleAction("cancel")}}},{key:"render",value:function(){var e=this.state,n=e.className,t=e.type,o=e.show,i=e.opacity,r="m-messagebox-container "+(n||""),a={display:o?"block":"none",background:"rgba(0, 0, 0, ".concat(d[i],")")};return l.createElement("div",{onClick:this.backgroundFunc.bind(this),className:r,style:a},"confirm"===t&&l.createElement(v,m({},this.state,{handleAction:this.handleAction.bind(this)})),"alert"===t&&l.createElement(g,m({},this.state,{handleAction:this.handleAction.bind(this)})),"toast"===t&&l.createElement(y,this.state),"custom"===t&&l.createElement(w,m({},this.state,{instance:this})))}}])&&a(n.prototype,o),i&&a(n,i),t}(),g=function(e){var n=e.showConfirmButton,t=e.handleAction,o=e.title,i=e.message,r=e.confirmButtonText,a=e.children;return l.createElement("div",{className:"m-alert"},l.createElement("div",{className:"m-msgbox-header"},l.createElement("div",{className:"m-msgbox-title"},o)),l.createElement("div",{className:"m-msgbox-content"},l.createElement("div",{className:"m-msgbox-message"},a||i)),l.createElement("div",{className:"m-msgbox-btn"},n&&l.createElement("div",{className:"m-confirm-btn",onClick:t.bind(h,"confirm")},r)))},v=function(e){var n=e.cancelButtonText,t=e.showCancelButton,o=e.showConfirmButton,i=e.handleAction,r=e.title,a=e.message,s=e.confirmButtonText,c=e.children;return l.createElement("div",{className:"m-confirm"},l.createElement("div",{className:"m-msgbox-header"},l.createElement("div",{className:"m-msgbox-title"},r)),l.createElement("div",{className:"m-msgbox-content"},l.createElement("div",{className:"m-msgbox-message"},c||a)),l.createElement("div",{className:"m-msgbox-btn"},t&&l.createElement("div",{className:"m-cancel-btn",onClick:i.bind(h,"cancel")},n),o&&l.createElement("div",{className:"m-confirm-btn",onClick:i.bind(h,"confirm")},s)))},y=function(e){var n=e.message,t=e.children;return l.createElement("div",{className:"m-toast"},l.createElement("div",{className:"m-content"},t||n))},w=function(e){var n=e.message,t=e.instance,o=e.children;return l.createElement("div",{className:"m-custom"},o||("function"==typeof n?n(t):n))};p.propTypes={show:n.bool,children:n.element,className:n.string,type:n.oneOf(["alert","confirm","toast","custom"]),title:n.string,message:n.oneOfType([n.string,n.element,n.func]),timeout:n.number,opacity:n.oneOf(["black","transparent"]),lockScroll:n.bool,backgroundFn:n.oneOfType([n.bool,n.func]),formatFn:n.func,showConfirmButton:n.bool,showCancelButton:n.bool,confirmButtonText:n.string,cancelButtonText:n.string,customCallback:n.func},p.defaultProps=s({},o);var i={boxs:[],getInstance:function(){var e=this.boxs;return 1===e.length&&!1===e[0].isShowing?e[0]:{}},setInstance:function(e,n){return this.boxs.push({isShowing:!0,domEl:n,instance:e}),this.boxs.length-1},removeInstance:function(e){if(1!==this.boxs.length){var n=this.boxs[e];document.body.removeChild(n.domEl),this.boxs.splice(e,1)}else this.boxs[0].isShowing=!1},render:function(n){var r=this,a=this.getInstance().instance,s=this;return new Promise(function(t,o){var i;if(n.callback=function(e,n){s.removeInstance(i),"confirm"===e?t(n):o(n)},a)a.update(n),i=0;else{var e=document.createElement("div");document.body.appendChild(e),a=c.render(l.createElement(p,m({ref:function(e){a=e}},n)),e),i=r.setInstance(a,e)}})}},x={alert:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l.isValidElement(e)||"object"!==t(e)||(n=e),i.render(Object.assign({},o,{message:e,type:"alert",showCancelButton:!0,show:!0},n))},confirm:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l.isValidElement(e)||"object"!==t(e)||(n=e),i.render(Object.assign({},o,{message:e,type:"confirm",showCancelButton:!0,show:!0},n))},toast:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l.isValidElement(e)||"object"!==t(e)||(n=e),i.render(Object.assign({},o,{message:e,timeout:2e3,opacity:"transparent",type:"toast",show:!0},n))},custom:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l.isValidElement(e)||"function"==typeof e||"object"!==t(e)||(n=e),i.render(Object.assign({},o,{message:e,type:"custom",show:!0},n))}};e.MessageBox=x,e.MessageBoxEl=p,Object.defineProperty(e,"__esModule",{value:!0})});
